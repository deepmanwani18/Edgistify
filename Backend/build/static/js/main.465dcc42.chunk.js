(this["webpackJsonpkeeper-app-part-1-starting"]=this["webpackJsonpkeeper-app-part-1-starting"]||[]).push([[0],{40:function(e,t,a){e.exports=a(85)},85:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(35),l=a.n(o),s=a(1),c=a(2),i=a(4),m=a(3),u=a(5),p=a(16),h=a(39),d=a(36),g=a.n(d).a.create({baseURL:"http://localhost:5000/"}),b=function(e){function t(){return Object(s.a)(this,t),Object(i.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"dialogbox"},r.a.createElement("div",{className:"body"},r.a.createElement("div",{className:"message"},r.a.createElement("p",{style:{fontWeight:"bold"}},this.props.authorName),r.a.createElement("span",null,this.props.caption),r.a.createElement("p",{style:{color:"blue"},onClick:function(){return e.props.replyHandle(e.props.authorName)}},"Reply")))))}}]),t}(r.a.Component),f={headers:{"Content-Type":"application/json;charset=UTF-8","Access-Control-Allow-Origin":"*",Authorization:localStorage.getItem("Authorization")}},E=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(i.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state=Object(h.a)({},a.props,{showCommentBox:!1,newComment:"",comments:[]}),a.showCommmentBoxhandler=function(){g.get("/post/comments/"+a.state._id).then((function(e){return a.setState({comments:e.data})})).catch((function(e){return console.log(e)})),a.setState({showCommentBox:!0})},a.handleNewComment=function(e){a.setState({newComment:e.target.value})},a.handleLike=function(e){var t={headers:{"Content-Type":"application/json;charset=UTF-8","Access-Control-Allow-Origin":"*",Authorization:localStorage.getItem("Authorization")}};g.post("/post/like",{post:e},t).then((function(e){return a.setState({likes:a.state.likes+1})})).catch((function(e){return alert("Looks like you already liked that post")}))},a._createComment=function(){if(""===a.state.newComment.trim())return alert("Enter text");g.post("/post/comment",{caption:a.state.newComment,post:a.state._id},f).then((function(e){200===e.status&&a.setState({newComment:"",comments:[e.data].concat(Object(p.a)(a.state.comments))})})).catch((function(e){return console.log(e)}))},a.replyHandle=function(e){a.setState({newComment:"@".concat(e," ")})},a.shareButtonhandler=function(e){var t=document.createElement("input");document.body.appendChild(t),t.setAttribute("value","http://localhost:3000/post?id=".concat(e)),t.select(),document.execCommand("copy"),document.body.removeChild(t),alert("Link copied to clipboard")},a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this,t=this.state.comments?this.state.comments.map((function(t){return r.a.createElement(b,Object.assign({replyHandle:e.replyHandle},t,{key:t._id}))})):r.a.createElement(r.a.Fragment,null);return r.a.createElement("div",{className:"post"},r.a.createElement("br",null),r.a.createElement("h4",null,this.props.authorName),r.a.createElement("p",{className:"caption",style:{fontFamily:"Sans-serif"}},this.props.caption),this.props.img&&r.a.createElement("a",{href:"http://localhost:4000/uploads/".concat(this.props.img),target:"_blank",rel:"noopener noreferrer"}," ",r.a.createElement("img",{style:{width:"24rem"},src:"http://localhost:4000/uploads/".concat(this.props.img),alt:""})),r.a.createElement("br",null),localStorage.getItem("Authorization")&&r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{id:"container"},r.a.createElement("button",{className:"learn-more",onClick:function(){return e.handleLike(e.props._id)}},r.a.createElement("span",{className:"circle","aria-hidden":"true"},r.a.createElement("span",{className:"icon arrow"})),r.a.createElement("span",{className:"button-text"},"Like(",this.state.likes,")"))),r.a.createElement("div",{id:"container",onClick:function(){return e.showCommmentBoxhandler()}},r.a.createElement("button",{className:"learn-more"},r.a.createElement("span",{className:"circle","aria-hidden":"true"},r.a.createElement("span",{className:"icon arrow"})),r.a.createElement("span",{className:"button-text"},"Comment"))),r.a.createElement("div",{id:"container",onClick:function(){return e.shareButtonhandler(e.props._id)}},r.a.createElement("button",{className:"learn-more"},r.a.createElement("span",{className:"circle","aria-hidden":"true"},r.a.createElement("span",{className:"icon arrow"})),r.a.createElement("span",{className:"button-text"},"Share")))),r.a.createElement("br",null),r.a.createElement("br",null),t,this.state.showCommentBox&&localStorage.getItem("Authorization")&&r.a.createElement("div",null,r.a.createElement("textarea",{style:{overflow:"hidden"},className:"comments",placeholder:"Write a Comment...",value:this.state.newComment,onChange:this.handleNewComment}),r.a.createElement("center",null,r.a.createElement("div",null,r.a.createElement("button",{className:"learn-more",onClick:this._createComment},r.a.createElement("span",{className:"circle","aria-hidden":"true"},r.a.createElement("span",{className:"icon arrow"})),r.a.createElement("span",{className:"button-text"},"Go"))))),r.a.createElement("br",null),r.a.createElement("hr",null))}}]),t}(r.a.Component),y=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(i.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={selectedFile:null,loaded:!1,caption:"",submit:!1},a.triggerInputFile=function(){a.fileUpload.click()},a.handleCaptionChange=function(e){a.setState({caption:e.target.value})},a.fileUploadhandler=function(e){a.setState({selectedFile:e.target.files[0],loaded:!0})},a._createPost=function(){if(""===a.state.caption.trim())return alert("Enter caption");var e={headers:{"Content-Type":"multipart/form-data","Access-Control-Allow-Origin":"*",Authorization:localStorage.getItem("Authorization")}},t=new FormData;t.append("image",a.state.selectedFile),t.append("caption",a.state.caption),console.log(t),g.post("/post",t,e).then((function(e){200===e.status&&(a.setState({submit:!0,caption:"",selectedFile:""}),a.props.addPost(e.data))})).catch()},a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("center",null,r.a.createElement("textarea",{value:this.state.caption,onChange:this.handleCaptionChange,className:"uploadtext",placeholder:"What's on your mind?"}),r.a.createElement("div",{style:{textAlign:"10rem"}},r.a.createElement("button",{className:"learn-more",onClick:this.triggerInputFile},r.a.createElement("input",{type:"file",accept:"image/*",onChange:this.fileUploadhandler,hidden:!0,ref:function(t){return e.fileUpload=t}}),r.a.createElement("span",{className:"circle","aria-hidden":"true"},r.a.createElement("span",{className:"icon arrow"})),r.a.createElement("span",{className:"button-text"},"Add Image")),r.a.createElement("div",null,r.a.createElement("button",{className:"learn-more",onClick:this._createPost},r.a.createElement("span",{className:"circle","aria-hidden":"true"},r.a.createElement("span",{className:"icon arrow"})),r.a.createElement("span",{className:"button-text"},"Post")))))}}]),t}(r.a.Component),v=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(i.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={posts:[]},a.addPost=function(e){a.setState({posts:[e].concat(Object(p.a)(a.state.posts))})},a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this;console.log(typeof localStorage.getItem("Authorization")),g.get("/post").then((function(t){return e.setState({posts:t.data})})).catch((function(e){return console.log(e)}))}},{key:"render",value:function(){var e=this.state.posts.map((function(e,t){return r.a.createElement(E,Object.assign({key:e._id},e))}));return r.a.createElement("div",null,localStorage.getItem("Authorization")&&r.a.createElement(y,{addPost:this.addPost}),e)}}]),t}(r.a.Component),w=a(8),C=function(e){function t(){return Object(s.a)(this,t),Object(i.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement("header",null,r.a.createElement("center",null,r.a.createElement("h1",{style:{fontFamily:"Pacifico",color:"black"}},"Edgistify"),r.a.createElement("span",null,r.a.createElement(w.b,{style:{color:"#f5ba13"},to:"/"},"Home")),r.a.createElement("span",{style:{marginLeft:"2rem"}},this.props.loggedIn?r.a.createElement(w.b,{style:{color:"#f5ba13"},to:"/login"},"Logout"):r.a.createElement(w.b,{style:{color:"#f5ba13"},to:"/login"},"Login"))))}}]),t}(r.a.Component);var j=function(){return r.a.createElement("footer",null)},O=a(13),k=a(6),S=a.n(k),N=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(i.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={email:"",password:"",loggedIn:!1},a.handleEmailChange=function(e){return a.setState({email:e.target.value})},a.handlePasswordChange=function(e){return a.setState({password:e.target.value})},a.handleLogin=function(){if(S.a.object().keys({email:S.a.string().trim().email({minDomainSegments:2,tlds:{allow:["com","net","org"]}}),password:S.a.string().min(6).required(),loggedIn:S.a.boolean()}).validate(a.state).error);else{g.post("/login",a.state,{headers:{"Content-Type":"application/json;charset=UTF-8","Access-Control-Allow-Origin":"*"}}).then((function(e){console.log(e.data.token),200===e.status&&(localStorage.setItem("Authorization",e.data.token),a.setState({loggedIn:!0}))})).catch((function(e){return alert("Either email/password combination is incorrect or account is not verified. Check your email to verify the account. ")}))}},a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){localStorage.clear()}},{key:"render",value:function(){return r.a.createElement("center",null,r.a.createElement("div",{style:{position:"relative",marginTop:"10vh"}},r.a.createElement("p",{style:{fontSize:"3.5em"}},"Login"),r.a.createElement("p",{style:{opacity:"0.76"}},"New to this site? ",r.a.createElement(w.b,{style:{color:"#f5ba13"},to:"/register"},"Register")),r.a.createElement("br",null),r.a.createElement("input",{type:"text",required:!0,placeholder:"Email",value:this.state.email,onChange:this.handleEmailChange}),r.a.createElement("br",null),r.a.createElement("input",{type:"password",required:!0,placeholder:"Password",value:this.state.password,onChange:this.handlePasswordChange}),r.a.createElement("br",null),r.a.createElement(w.b,{style:{color:"#f5ba13"},to:"/forgot"},"Forgot Password?"),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("input",{type:"submit",value:"Login",onClick:this.handleLogin})),this.state.loggedIn&&r.a.createElement(O.a,{to:"/"}))}}]),t}(r.a.Component),A=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(i.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={email:"",submit:!1},a.handleEmailChange=function(e){return a.setState({email:e.target.value})},a.handleSubmit=function(){var e=S.a.object().keys({email:S.a.string().trim().email({minDomainSegments:2,tlds:{allow:["com","net","org"]}}),submit:S.a.boolean()}).validate(a.state);if(e.error)console.log(e);else{g.post("/auth/forgot",a.state,{headers:{"Content-Type":"application/json;charset=UTF-8","Access-Control-Allow-Origin":"*"}}).then((function(e){200===e.status&&(alert("Check your email for the link"),a.setState({submit:!0}))})).catch((function(e){return console.log(e)}))}},a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement("center",null,r.a.createElement("div",{style:{position:"relative",marginTop:"10vh"}},r.a.createElement("p",{style:{fontSize:"2.1em"}},"Trouble Logging in?"),r.a.createElement("p",{style:{overflowWrap:"revert"}},"Enter your username or email and we'll send ",r.a.createElement("br",null),"you a link to get back into your account."),r.a.createElement("br",null),r.a.createElement("input",{type:"text",placeholder:"Email",value:this.state.email,onChange:this.handleEmailChange}),r.a.createElement("br",null),r.a.createElement("input",{type:"submit",value:"Send Login Link",onClick:this.handleSubmit}),r.a.createElement("br",null),r.a.createElement(w.b,{to:"/login"},r.a.createElement("input",{type:"submit",value:"Back To Login"}))))}}]),t}(r.a.Component),P=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(i.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={fname:"",lname:"",email:"",password:"",password2:"",loggedIn:!1},a.handleFnameChange=function(e){return a.setState({fname:e.target.value})},a.handleLnameChange=function(e){return a.setState({lname:e.target.value})},a.handleEmailChange=function(e){return a.setState({email:e.target.value})},a.handlePasswordChange=function(e){return a.setState({password:e.target.value})},a.handlePassword2Change=function(e){return a.setState({password2:e.target.value})},a.handleRegister=function(){var e=k.object().keys({fname:k.string().trim().min(3).max(20).required(),lname:k.string().trim().min(3).max(20).required(),email:k.string().trim().email({minDomainSegments:2,tlds:{allow:["com","net","org"]}}),password:k.string().min(6).required(),password2:k.ref("password"),loggedIn:k.boolean()}).validate(a.state);if(e.error)console.log(e);else{g.post("/auth/register",a.state,{headers:{"Content-Type":"application/json;charset=UTF-8","Access-Control-Allow-Origin":"*"}}).then((function(e){200===e.status&&a.setState({loggedIn:!0})})).catch((function(e){return alert("Already registered")}))}},a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement("center",null,r.a.createElement("div",{style:{position:"relative",marginTop:"3vh"}},r.a.createElement("p",{style:{fontSize:"3.5em"}},"Register"),r.a.createElement("p",{style:{opacity:"0.76"}},"Already a User? ",r.a.createElement(w.b,{style:{color:"#f5ba13"},to:"/login"},"Login")),r.a.createElement("input",{type:"text",placeholder:"First Name",value:this.state.fname,onChange:this.handleFnameChange}),r.a.createElement("br",null),r.a.createElement("input",{type:"text",placeholder:"Last Name",value:this.state.lname,onChange:this.handleLnameChange}),r.a.createElement("br",null),r.a.createElement("input",{type:"email",placeholder:"Email",value:this.state.email,onChange:this.handleEmailChange}),r.a.createElement("br",null),r.a.createElement("input",{type:"password",placeholder:"Password",value:this.state.password,onChange:this.handlePasswordChange}),r.a.createElement("br",null),r.a.createElement("input",{type:"password",placeholder:"Password Again",value:this.state.password2,onChange:this.handlePassword2Change}),r.a.createElement("br",null),r.a.createElement("input",{type:"submit",value:"Sign Up",onClick:this.handleRegister})),this.state.loggedIn&&r.a.createElement(O.a,{to:"/login"}))}}]),t}(r.a.Component),x=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(i.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={post:{}},a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this;g.get("/post/".concat(this.props.location.search.split("?")[1].split("=")[1])).then((function(t){return e.setState({post:t.data})})).catch((function(e){return console.log(e)}))}},{key:"render",value:function(){return r.a.createElement("div",null,this.state.post&&r.a.createElement(E,this.state.post))}}]),t}(r.a.Component),I=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(i.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={password:"",password2:"",submit:!1},a.handlePasswordChange=function(e){return a.setState({password:e.target.value})},a.handlePassword2Change=function(e){return a.setState({password2:e.target.value})},a.handleSubmit=function(){if(S.a.object().keys({password:S.a.string().min(6).required(),password2:S.a.ref("password"),submit:S.a.boolean()}).validate(a.state).error)alert("Password rules not met");else{g.post("/auth/reset?".concat(a.props.location.search.split("?")[1]),a.state,{headers:{"Content-Type":"application/json;charset=UTF-8","Access-Control-Allow-Origin":"*"}}).then((function(e){200===e.status&&a.setState({submit:!0})})).catch((function(e){return console.log(e)}))}},a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement("center",null,r.a.createElement("div",{style:{position:"relative",marginTop:"10vh"}},r.a.createElement("p",{style:{fontSize:"2.1em"}},"Set New Password"),r.a.createElement("input",{type:"password",id:"password",placeholder:"New Password",value:this.state.password,onChange:this.handlePasswordChange}),r.a.createElement("br",null),r.a.createElement("input",{type:"password",id:"rePassword",placeholder:"New Password Again",value:this.state.password2,onChange:this.handlePassword2Change}),r.a.createElement("br",null),r.a.createElement("input",{type:"submit",id:"submit",value:"Set Password",onClick:this.handleSubmit})),this.state.submit&&r.a.createElement(O.a,{to:"/login"}))}}]),t}(r.a.Component),F=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(i.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={status:!1},a.updateState=function(e){a.setState({status:e})},a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this;setInterval((function(){localStorage.getItem("Authorization")?e.state.status||e.updateState(!0):e.updateState(!1)}),500)}},{key:"render",value:function(){return r.a.createElement(w.a,null,r.a.createElement("div",null,r.a.createElement(C,{loggedIn:this.state.status}),r.a.createElement(O.b,{path:"/login",component:N}),r.a.createElement(O.b,{path:"/register",component:P}),r.a.createElement(O.b,{path:"/forgot",component:A}),r.a.createElement(O.b,{path:"/reset",component:I}),r.a.createElement(O.b,{path:"/post",component:x}),r.a.createElement(O.b,{exact:!0,path:"/",component:v}),r.a.createElement(j,null)))}}]),t}(r.a.Component);l.a.render(r.a.createElement(F,null),document.getElementById("root"))}},[[40,1,2]]]);
//# sourceMappingURL=main.465dcc42.chunk.js.map